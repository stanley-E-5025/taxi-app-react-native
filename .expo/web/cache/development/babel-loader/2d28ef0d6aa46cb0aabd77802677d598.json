{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Subscriptions = function () {\n  function Subscriptions(nativeInterface, eventEmitter) {\n    this.locationListenerCount = 0;\n    this.headingListenerCount = 0;\n    this.significantLocationListenerCount = 0;\n    this.nativeInterface = nativeInterface;\n    this.eventEmitter = eventEmitter;\n  }\n\n  Subscriptions.prototype.subscribeToLocationUpdates = function (listener) {\n    var _this = this;\n\n    var emitterSubscription = this.eventEmitter.addListener(\"locationUpdated\", listener);\n    this.nativeInterface.startUpdatingLocation();\n    this.locationListenerCount += 1;\n    return function () {\n      emitterSubscription.remove();\n      _this.locationListenerCount -= 1;\n\n      if (_this.locationListenerCount === 0) {\n        _this.nativeInterface.stopUpdatingLocation();\n      }\n    };\n  };\n\n  Subscriptions.prototype.subscribeToHeadingUpdates = function (listener) {\n    var _this = this;\n\n    var emitterSubscription = this.eventEmitter.addListener(\"headingUpdated\", listener);\n    this.nativeInterface.startUpdatingHeading();\n    this.headingListenerCount += 1;\n    return function () {\n      emitterSubscription.remove();\n      _this.headingListenerCount -= 1;\n\n      if (_this.headingListenerCount === 0) {\n        _this.nativeInterface.stopUpdatingHeading();\n      }\n    };\n  };\n\n  Subscriptions.prototype.subscribeToSignificantLocationUpdates = function (listener) {\n    var _this = this;\n\n    var emitterSubscription = this.eventEmitter.addListener(\"locationUpdated\", listener);\n    this.nativeInterface.startMonitoringSignificantLocationChanges();\n    this.significantLocationListenerCount += 1;\n    return function () {\n      emitterSubscription.remove();\n      _this.significantLocationListenerCount -= 1;\n\n      if (_this.significantLocationListenerCount === 0) {\n        _this.nativeInterface.stopMonitoringSignificantLocationChanges();\n      }\n    };\n  };\n\n  return Subscriptions;\n}();\n\nexports.default = Subscriptions;","map":{"version":3,"sources":["../../src/lib/subscriptions.ts"],"names":[],"mappings":";;;;;;AAYA,IAAA,aAAA,GAAA,YAAA;AAOE,WAAA,aAAA,CACE,eADF,EAEE,YAFF,EAE4B;AANpB,SAAA,qBAAA,GAAwB,CAAxB;AACA,SAAA,oBAAA,GAAuB,CAAvB;AACA,SAAA,gCAAA,GAAmC,CAAnC;AAMN,SAAK,eAAL,GAAuB,eAAvB;AACA,SAAK,YAAL,GAAoB,YAApB;AACD;;AAEM,EAAA,aAAA,CAAA,SAAA,CAAA,0BAAA,GAAP,UACE,QADF,EAC2C;AAD3C,QAAA,KAAA,GAAA,IAAA;;AAGE,QAAM,mBAAmB,GAAG,KAAK,YAAL,CAAkB,WAAlB,CAC1B,iBAD0B,EAE1B,QAF0B,CAA5B;AAIA,SAAK,eAAL,CAAqB,qBAArB;AACA,SAAK,qBAAL,IAA8B,CAA9B;AAEA,WAAO,YAAA;AACL,MAAA,mBAAmB,CAAC,MAApB;AACA,MAAA,KAAI,CAAC,qBAAL,IAA8B,CAA9B;;AAEA,UAAI,KAAI,CAAC,qBAAL,KAA+B,CAAnC,EAAsC;AACpC,QAAA,KAAI,CAAC,eAAL,CAAqB,oBAArB;AACD;AACF,KAPD;AAQD,GAlBM;;AAoBA,EAAA,aAAA,CAAA,SAAA,CAAA,yBAAA,GAAP,UACE,QADF,EACsC;AADtC,QAAA,KAAA,GAAA,IAAA;;AAGE,QAAM,mBAAmB,GAAG,KAAK,YAAL,CAAkB,WAAlB,CAC1B,gBAD0B,EAE1B,QAF0B,CAA5B;AAIA,SAAK,eAAL,CAAqB,oBAArB;AACA,SAAK,oBAAL,IAA6B,CAA7B;AAEA,WAAO,YAAA;AACL,MAAA,mBAAmB,CAAC,MAApB;AACA,MAAA,KAAI,CAAC,oBAAL,IAA6B,CAA7B;;AAEA,UAAI,KAAI,CAAC,oBAAL,KAA8B,CAAlC,EAAqC;AACnC,QAAA,KAAI,CAAC,eAAL,CAAqB,mBAArB;AACD;AACF,KAPD;AAQD,GAlBM;;AAoBA,EAAA,aAAA,CAAA,SAAA,CAAA,qCAAA,GAAP,UACE,QADF,EAC2C;AAD3C,QAAA,KAAA,GAAA,IAAA;;AAGE,QAAM,mBAAmB,GAAG,KAAK,YAAL,CAAkB,WAAlB,CAC1B,iBAD0B,EAE1B,QAF0B,CAA5B;AAIA,SAAK,eAAL,CAAqB,yCAArB;AACA,SAAK,gCAAL,IAAyC,CAAzC;AAEA,WAAO,YAAA;AACL,MAAA,mBAAmB,CAAC,MAApB;AACA,MAAA,KAAI,CAAC,gCAAL,IAAyC,CAAzC;;AAEA,UAAI,KAAI,CAAC,gCAAL,KAA0C,CAA9C,EAAiD;AAC/C,QAAA,KAAI,CAAC,eAAL,CAAqB,wCAArB;AACD;AACF,KAPD;AAQD,GAlBM;;AAmBT,SAAA,aAAA;AAAC,CA1ED,EAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Internal helper class for managing event subscriptions\n * @ignore\n */\nvar Subscriptions = /** @class */ (function () {\n    function Subscriptions(nativeInterface, eventEmitter) {\n        this.locationListenerCount = 0;\n        this.headingListenerCount = 0;\n        this.significantLocationListenerCount = 0;\n        this.nativeInterface = nativeInterface;\n        this.eventEmitter = eventEmitter;\n    }\n    Subscriptions.prototype.subscribeToLocationUpdates = function (listener) {\n        var _this = this;\n        var emitterSubscription = this.eventEmitter.addListener(\"locationUpdated\", listener);\n        this.nativeInterface.startUpdatingLocation();\n        this.locationListenerCount += 1;\n        return function () {\n            emitterSubscription.remove();\n            _this.locationListenerCount -= 1;\n            if (_this.locationListenerCount === 0) {\n                _this.nativeInterface.stopUpdatingLocation();\n            }\n        };\n    };\n    Subscriptions.prototype.subscribeToHeadingUpdates = function (listener) {\n        var _this = this;\n        var emitterSubscription = this.eventEmitter.addListener(\"headingUpdated\", listener);\n        this.nativeInterface.startUpdatingHeading();\n        this.headingListenerCount += 1;\n        return function () {\n            emitterSubscription.remove();\n            _this.headingListenerCount -= 1;\n            if (_this.headingListenerCount === 0) {\n                _this.nativeInterface.stopUpdatingHeading();\n            }\n        };\n    };\n    Subscriptions.prototype.subscribeToSignificantLocationUpdates = function (listener) {\n        var _this = this;\n        var emitterSubscription = this.eventEmitter.addListener(\"locationUpdated\", listener);\n        this.nativeInterface.startMonitoringSignificantLocationChanges();\n        this.significantLocationListenerCount += 1;\n        return function () {\n            emitterSubscription.remove();\n            _this.significantLocationListenerCount -= 1;\n            if (_this.significantLocationListenerCount === 0) {\n                _this.nativeInterface.stopMonitoringSignificantLocationChanges();\n            }\n        };\n    };\n    return Subscriptions;\n}());\nexports.default = Subscriptions;\n//# sourceMappingURL=subscriptions.js.map"]},"metadata":{},"sourceType":"script"}